{% extends 'base.html.twig' %}

{% block title "Location-Acceuil" %}
{% block loguer %} {{app.user.nom}}  {{app.user.prenom}} {% endblock %}

{% block body %}
<h1 class="header mt-4" style="text-align: center;">Liste des Locations</h1>
<div class=" mt-6">
		{% for message in app.flashes('success') %}
		<div class=" alert alert-success">
			{{message}}
		</div>
		{% endfor %}
		
		{% for message in app.flashes('erreur') %}
		<div class=" alert alert-danger">
			{{message}}
		</div>
		{% endfor %}
		<br>
		<div class="card">
		<div class="card-header">
			<div class="row">
				<div class="text-right">
					 <a class="btn btn-success" href=" {{path('recep.location.etape1')}} ">Nouvelle Location</a>
				</div>

			</div>
			
		</div>
		<br>
		<div class="card-body">
		 <div class="table-responsive">
	                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
	                  <thead>
	                    <tr>
		                    <th>Informations Client</th>
							<th>Type de salle</th>
							<th>Places</th>
							<th>Coût/jours</th>
							<th>Du</th>
							<th>Au</th>
							<th>Coût Total</th>
							<th>Caution</th>
							<th>Plus</th>
	                    </tr>
	                  </thead>
	                  <tbody>
	                    	{% for location in locations %}
								<tr>
									<td> {{location.client.nom}} {{ location.client.prenom}} </td>
									<td> {{location.salle.typesalle}} </td>
									<td> {{location.salle.places}} </td>
									<td> {{location.salle.prix }} </td>
									<td> {{location.beginat|date("d/m/Y") }} </td>
									<td> {{location.endat|date("d/m/Y") }} </td>
									<td> {{location.couttotal }} </td>
									<td>{{location.caution }}</td>
									<td>
										<a href=" # "><i class="fas fa-check"></i><span></span></a>
										<a href=" # "><i class="fas fa-user-edit"></i><span></span></a>
										<a href="{{path('recep.location.consult',{id:location.id})}}">
								          <i class="fas fa-fw fa-address-card"></i>
								          <span></span>
								        </a>
									</td>
								</tr>
								
							{% endfor %}
	                  </tbody>
	                </table>
	            	</div>
					
	            </div>
        </div>
		

	</div>
{% endblock %}
{% block script %}
	<script type="text/javascript">
		/*function diffdate(d1,d2){
			var jour = d2.getTime() - d1.getTime();
			return Math.ceil(jour/(1000*60*60*24));
		}

        window.onload = function(){
        	var dte_2 = document.getElementById("date2").value;
        	var date2 = new Date(dte_2);
        	var oday = new Date();
        	var jour = diffdate(date2,oday);
        	if(jour<0){
        		document.getElementById("etat").innerText = "En cours";
        	}else{
        		document.getElementById("etat").innerText = "Terminée";
        	}

        } */
    </script>
{% endblock %}